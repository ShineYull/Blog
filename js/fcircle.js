var fdata={api:"https://hexo-circle-of-friends.shineyu.cn/",init:20,step:10,sort:"created",avatar:"https://npm.elemecdn.com/eurkon-cdn/hexo/images/user/loading.gif"};function loadArticleItem_fcircle(e,t,a,i){let n="";for(let l=t;l<Math.min(a,i);l++){let t=e[l];n+=`\n      <div class="article-sort-item fc-article-sort-item">\n        <a class="article-sort-item-img" onclick="openMeShow(event)" title="${t.author}" data-link="${t.link}" target="_blank" rel="noopener nofollow" href="javascript:;"> \n          <img src="${t.avatar}" alt="${t.title}" onerror="this.onerror=null;this.src='${fdata.avatar}';">\n        </a>\n        <div class="article-sort-item-info no-lightbox flink-item-icon">\n          <a class="article-sort-item-title" href="${t.link}" target="_blank" rel="noopener nofollow" title="${t.title}">${t.title}</a>\n          <span class="article-sort-item-index">${t.floor}</span>\n          <div class="article-meta-wrap">\n            <i class="far fa-user"></i>\n            <span class="fc-article-author">${t.author}</span>\n            <div class="article-sort-item-time">\n              <span class="fc-time-created" style="${"created"==fdata.sort?"":"display:none"}"><i class="far fa-calendar-alt"></i> ${t.created} </span>\n              <span class="fc-time-updated" style="${"updated"==fdata.sort?"":"display:none"}"><i class="fas fa-history"></i> ${t.updated} </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      `}document.getElementById("fc-container").insertAdjacentHTML("beforeend",n),fetchNextArticle_fcircle()}function loadFcircleShow_fcircle(e,t){let a='<div class="fc-overshow" style="display: flex; align-items: center; justify-content: center;">暂无数据</div>';if(e&&t){a=`\n      <div class="fc-overshow">\n        <div class="fc-overshow-head avatar-img">\n          <a class="" target="_blank" rel="noopener nofollow" href="${e.link}"><img src="${e.avatar}" alt="avatar" onerror="this.src='${fdata.avatar}'; this.onerror = null;"></a>\n        </div>\n        <div>\n          <i class="far fa-user"></i>\n          <span class="fc-article-author">${e.name}</span>\n        </div>\n        <div class="fc-overshow-content">`;for(let i=0;i<Math.min(e.article_num,fdata.init);i++){let e=t[i];a+=`\n      <p><a class="article-sort-item-title" href="${e.link}" target="_blank" rel="noopener nofollow" title="${e.title}">${e.title}</a><span>${e.created}</span></p>`}a+="</div></div>"}document.getElementById("fc-overshow").insertAdjacentHTML("beforeend",a),document.getElementById("fc-overshow").classList.add("fc-show-now")}function fetchNextArticle_fcircle(){let e=document.getElementById("fc-container").getElementsByClassName("article-sort-item").length,t=JSON.parse(localStorage.getItem("fc_statistical")).article_num,a=Math.min(e+fdata.step,t);if(e<t){let t=fdata.api+"all?rule="+fdata.sort+"&start="+e+"&end="+a;fetch(t).then((e=>e.json())).then((e=>{let t=e.article_data;localStorage.setItem("fc_nextArticle",JSON.stringify(t))}))}else(e=t)&&(document.getElementById("fc-more").outerHTML='<div id="fc-more" class="article-sort-item"><small>一切皆有尽头！</small></div>')}function loadNextArticle_fcircle(){let e=JSON.parse(localStorage.getItem("fc_nextArticle")),t="";for(let a=0;a<e.length;a++){let i=e[a];t+=`\n    <div class="article-sort-item fc-article-sort-item">\n      <a class="article-sort-item-img" onclick="openMeShow(event)" title="${i.author}" data-link="${i.link}" target="_blank" rel="noopener nofollow" href="javascript:;"> \n        <img src="${i.avatar}" alt="${i.title}" onerror="this.onerror=null;this.src='${fdata.avatar}';">\n      </a>\n      <div class="article-sort-item-info no-lightbox flink-item-icon">\n        <a class="article-sort-item-title" href="${i.link}" target="_blank" rel="noopener nofollow" title="${i.title}">${i.title}</a>\n        <span class="article-sort-item-index">${i.floor}</span>\n        <div class="article-meta-wrap">\n          <i class="far fa-user"></i>\n          <span class="fc-article-author">${i.author}</span>\n          <div class="article-sort-item-time">\n            <span class="fc-time-created" style="${"created"==fdata.sort?"":"display:none"}"><i class="far fa-calendar-alt"></i> ${i.created} </span>\n            <span class="fc-time-updated" style="${"updated"==fdata.sort?"":"display:none"}"><i class="fas fa-history"></i> ${i.updated} </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}document.getElementById("fc-container").insertAdjacentHTML("beforeend",t),fetchNextArticle_fcircle()}function fetchFriendCircle_fcircle(e){let t=fdata.api+"all?rule="+e+"&start=0&end="+fdata.init;fetch(t).then((e=>e.json())).then((e=>{let t=e.statistical_data,a=e.article_data;localStorage.setItem("fc_statistical",JSON.stringify(t)),localStorage.setItem("fc_article",JSON.stringify(a)),loadArticleItem_fcircle(a,0,fdata.init,t.article_num)}))}function openMeShow(e){e.preventDefault();let t=e.currentTarget.dataset.link.replace(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,"$1:$2$3"),a="";a=fdata.api+"post?link="+t+"&num=10",fetchShow(a),console.log("[Shine]: openMeShow")}function closeShow(){document.getElementById("fc-overlay").classList.remove("fc-show-now"),document.getElementById("fc-overshow").classList.remove("fc-show-now"),document.getElementById("fc-overshow").innerHTML=""}function fetchShow(e){document.getElementById("fc-overlay").classList.add("fc-show-now"),document.getElementById("fc-overshow").insertAdjacentHTML("afterbegin",'<div class="fc-overshow-close" onclick="closeShow()"></div>'),fetch(e).then((e=>e.json())).then((e=>{loadFcircleShow_fcircle(e.statistical_data,e.article_data)}))}function initFriendCircle_fcircle(e){document.body.insertAdjacentHTML("afterend",'<div id="fc-overlay" onclick="closeShow()"></div>\n      <div id="fc-overshow-parent"><div id="fc-overshow"></div></div>')}initFriendCircle_fcircle(fdata.sort);